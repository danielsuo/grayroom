cmake_minimum_required (VERSION 3.1)

include (ExternalProject)

set (LIBRAW_EXTERNAL_PROJECT libraw-git)
message (${CMAKE_CURRENT_BINARY_DIR})
set (LIBRAW_SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/${LIBRAW_EXTERNAL_PROJECT}-prefix/src/${LIBRAW_EXTERNAL_PROJECT}/)

ExternalProject_Add (
  ${LIBRAW_EXTERNAL_PROJECT}
  GIT_REPOSITORY "https://github.com/LibRaw/LibRaw.git"
  GIT_TAG "master"
  UPDATE_COMMAND ""
  CONFIGURE_COMMAND cd ${LIBRAW_SOURCE_DIR} && autoreconf --install && ./configure
  BUILD_COMMAND cd ${LIBRAW_SOURCE_DIR} && make -j8
  INSTALL_COMMAND cd ${LIBRAW_SOURCE_DIR} && make install 
  )

set (LIBRAW_EXTERNAL_PROJECT ${LIBRAW_EXTERNAL_PROJECT} PARENT_SCOPE)
set (LIBRAW_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/${LIBRAW_EXTERNAL_PROJECT}-prefix/src/${LIBRAW_EXTERNAL_PROJECT} PARENT_SCOPE)
set (LIBRAW_LIBRARY_DIRS ${CMAKE_CURRENT_BINARY_DIR}/${LIBRAW_EXTERNAL_PROJECT}-prefix/src/${LIBRAW_EXTERNAL_PROJECT}/lib/.libs PARENT_SCOPE)
